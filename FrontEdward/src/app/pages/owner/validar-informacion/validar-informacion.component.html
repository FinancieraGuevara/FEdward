<div class="validar-informacion">
  <div class="container">
    <header>
      <h1 class="text-center mb-4">Ingrese los datos</h1>
      <div class="progress-container">
        <div class="progress-bar" style="width: 25%"></div>
      </div>
    </header>

    <nav class="back-navigation">
    </nav>

    <main>
      <form #myForm="ngForm" (ngSubmit)="continue()" novalidate>
        <div class="form-section">
          <h2>Tipo de Documento</h2>
          <div class="radio-group">
            <label class="radio-label">
              <input type="radio" name="tipoDocumento" [(ngModel)]="selectedTipo" value="dni" required>
              <span>DNI</span>
            </label>
            <label class="radio-label">
              <input type="radio" name="tipoDocumento" [(ngModel)]="selectedTipo" value="ruc" required>
              <span>RUC</span>
            </label>
          </div>
          <div *ngIf="myForm.controls['tipoDocumento']?.invalid && myForm.controls['tipoDocumento']?.touched" class="error-message">
            Selecciona un tipo de documento.
          </div>
        </div>

        <div class="form-section" *ngIf="!isLoading">
          <h2>Número de Documento</h2>

         <!-- Mostrar el campo DNI si 'selectedTipo' es 'dni' -->
          <div class="input-group" *ngIf="selectedTipo === 'dni'">
            <input type="text" id="dni" class="form-control" placeholder="Ingrese número de documento"
                  maxlength="8" (keypress)="validateNumber($event)" [(ngModel)]="dni" name="dni" required>
            <button class="btn btn-search" type="button" (click)="buscar()">Buscar DNI</button>
          </div>

          <!-- Mostrar el campo RUC si 'selectedTipo' es 'ruc' -->
          <div class="input-group" *ngIf="selectedTipo === 'ruc'">
            <input type="text" id="ruc" class="form-control" placeholder="Ingrese número de documento"
                  maxlength="11" (keypress)="validateNumber($event)" [(ngModel)]="ruc" name="ruc" required>
            <button class="btn btn-search" type="button" (click)="buscar()">Buscar RUC</button>
          </div>

          <div *ngIf="myForm.controls['dni']?.invalid && myForm.controls['dni']?.touched" class="error-message">
            El número de documento es obligatorio.
          </div>
        </div>

        <div class="loading-spinner" *ngIf="isLoading">
          <div class="spinner"></div>
        </div>

        <div class="result-section" *ngIf="!isLoading && loading == 1">
          <h2>Información del solicitante</h2>
          <div class="info-grid">
            <div class="info-item">
              <span class="label">Documento:</span>
              <span class="value">{{ solicitanteData.numero }}</span>
            </div>
            <div class="info-item">
              <span class="label">Nombre o razón social:</span>
              <span class="value">{{ solicitanteData.nombre_completo }}</span>
            </div>
          </div>
          <button type="submit" class="btn btn-continue">Continuar</button>
        </div>
      </form>
    </main>

    <div class="custom-alert" *ngIf="showError">
      Error: Hubo un problema al iniciar sesión.
    </div>
  </div>

  <footer>
    <hr>
    <p class="copyright">Copyright © 2024, All rights reserved.</p>
  </footer>
</div>